# **纳管集群及集群角色说明**

## 纳管类型

容器管理统一管理的集群主要分为两种纳管类型：

1. **接入集群**，接入集群分为 2 种不同类型集群：
   1. 接入任意符合一定版本要求的 Kubernetes 集群，目前已支持标准的 Kubernetes 集群接入但平台不负责接入集群生命周期管理，接入集群仅用于承载 应用业务的工作负载。
   2. 接入的为管理集群（DKG, Daocloud Kubernetes Grid），平台基于 Kubespray 技术，实现多集群的全生命周期管理，通过管理集群进行工作集群的创建/升级/删除等操作。接入前需要先完成管理集群（DKG）搭建，接入后可实现多集群（工作集群）的全生命周期管理。如何搭建请参考：***

2. **自建集群**，可在容器管理平台界面创建的工作集群（DKE，Daocloud Kubernetes Engine ）,工作集群用于承载应用工作负载，全生命周期可被管理。

| 支持的功能                                                   | 接入标准 Kubenetes 集群      | 接入管理集群（DKG）   | 自管集群（DKE）            |
| ------------------------------------------------------------ | ---------------------------- | --------------------- | -------------------------- |
| Kubernetes 版本                                              | ？                           | ？                    | ？                         |
| 集群全生命周期管理                                           | 不支持                       | 界面不支持            | 支持集群的创建、升级、删除 |
| Namespace 管理                                               | 支持                         | 支持                  | 支持                       |
| Kubernetes 资源管理<br />（有状态负载、无状态负载、守护进程等） | 支持                         | 支持                  | 支持                       |
| 权限管理                                                     | 支持                         | 支持                  | 支持                       |
| 策略管理<br />（网络策略、配额策略、资源限制、灾备策略、安全策略） | 支持                         | 支持                  | 支持                       |
| 网络模式                                                     | 依赖于接入集群发行版网络模式 | Calico/Cillium/Multus | Calico/Cillium/Multus      |
| 存储管理                                                     | ？                           | ？                    | ？                         |



## **集群角色**

集群角色一般仅为 **自管集群** 的角色，接入集群默认无角色，当接入集群升级为全局服务集群/管理集群时，则具备相应的角色身份。

**集群角色分为如下三类：**

1. 管理集群
2. 工作集群
3. 全局服务集群

一个集群可以有多重集群角色，如一个管理集群也可以是全局服务集群。

**什么是管理集群？**

管理集群为平台自管集群，负责创建的 **工作集群** 的创建/升级/删除等全生命周期管理，如何创建管理集群请参考：

**什么是工作集群？**

工作集群是被管理集群创建出来的子集群，此类集群的生命周期由父集群（管理集群）进行管理，工作集群可基于界面进行创建，如何创建工作集群请参考：“***”

**什么是全局服务集群？**

全局服务集群 用于承载整个平台所有系统组件的集群，包括容器管理组件、镜像仓库组件、监控组件等。全局服务集群同时也是工作集群。

不同集群角色对应操作:

| 管理集群    | 工作集群    | 全局服务集群 | 接入集群    |
| :---------- | :---------- | :----------- | :---------- |
| Cloud Shell | Cloud Shell | Cloud Shell  | Cloud Shell |
| 集群编辑    | 集群编辑    | 集群升级     | 集群升级    |
| 集群升级    | 集群升级    | 证书更新     | 解除接入    |
| 证书更新    | 证书更新    |              |             |
| 解除接入    | 删除        |              |             |

